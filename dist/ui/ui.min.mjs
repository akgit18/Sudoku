function e(a,c){if(16>a)return Uint8Array;if(c("This Sudoku is likely too big to solve in a reasonable amount of time. Are you sure that you'd like to continue?")){if(256>a)return Uint16Array;if(65536>a)return Uint32Array;throw new RangeError(`This Sudoku (box size ${a}) is too big too solve!`);}throw Error("Sudoku solving stopped by user.");}let g="Translator"in self,h=void 0,k=void 0;async function l(){for(const c of navigator.languages){var a=new Intl.Locale(c);a=a.script?`${a.language}-${a.script}`:
a.language;if("en"===a){g=!1;return}try{if("unavailable"!==await Translator.availability({sourceLanguage:"en",targetLanguage:a}))return a}catch{}}g=!1}async function m(a,c,b=3){if(0>=b)return g=!1,a;try{return await c.translate(a)}catch(d){if(d instanceof DOMException)switch(d.name){case "QuotaExceededError":return console.error(d),a;case "AbortError":return n(a,b-1);default:return m(a,c,b-1)}else return console.error(d),a}}async function n(a,c){if(0>=c)return g=!1,a;if(!k)return console.error("Translation Error: target language somehow became undefined after it was defined"),
a;try{return h=Translator.create({sourceLanguage:"en",targetLanguage:k}),m(a,h,c)}catch(b){if(b instanceof DOMException)switch(b.name){case "NotAllowedError":console.error(b);case "NotSupportedError":return g=!1,a;default:return n(a,c-1)}else return a}}async function r(a){if(h)return m(a,h,3);k=await l();return g&&k?n(a,3):a}const t={l:"The quick red fox jumped over the lazy brown dog.",o:"Browser does not support web workers. Please use a more modern browser."};g&&document.body.addEventListener("load",
async()=>{console.log("load event listened");for(const a in t)t[a]=await r(t[a]);console.log("translated phrases: ",t)});if(!self.Worker)throw Error("Browser does not support web workers. Please use a more modern browser.");const u=new URL("../solver/solver.min.mjs",import.meta.url),w=new Worker(u,{type:"module"});let y=3;const z=document.getElementById("board");function A(){let a=!1;for(let c=0;c<y**2;c++){let b=z.insertRow(c);0==c%y&&(a=!a);for(let d=0;d<y**2;d++)(0<d||0==y%2)&&0==d%y&&(a=!a),b.insertCell(d).innerHTML=
a?"<input inputmode='numeric' size='1' maxlength='2' autocomplete='off' class='col1'>":"<input inputmode='numeric' size='1' maxlength='2' autocomplete='off' class='col2'>"}}function B(a,c){a=new (e(Math.sqrt(c),()=>!0))(a,0,c**2);for(let b=0;b<c;++b){let d=z.rows[b];for(let f=0;f<c;++f)d.cells[f].children[0].value=a[b*c+f]?.toString()??""}}document.body.onload=()=>{A();document.getElementById("cboard").onclick=()=>{confirm("Are you sure? This will erase any data you have currently entered.")&&(z.removeChild(document.getElementsByTagName("tbody")[0]),
A())};document.getElementById("sboard").onclick=()=>{var b=y,d=e(b,confirm);b**=2;const f=document.getElementById("board"),v=new ArrayBuffer(d.BYTES_PER_ELEMENT*b**2);d=new d(v,0,b**2);for(let p=0;p<b;p++){const C=f.rows[p];for(let q=0;q<b;q++){const x=parseInt(C.cells[q].children[0].value,10);d[p*b+q]=0<x?x:-1}}w.postMessage({type:3,data:{h:y,g:v}},[v])};w.onmessage=b=>{b=b.data;switch(b.type){case -1:const d=b.data.j;B(b.data.g,b.data.i);console.log(`Solved in ${d} milliseconds.`);break;case -2:b=
b.data;(b instanceof Error||"string"===typeof b)&&alert(b);console.error(b);break;default:console.error("Unsupported message from worker to main thread:",b)}};w.onerror=b=>{console.error("worker error:",b)};w.m=b=>{console.error("message error for:",b)};const a=document.getElementById("Size");a.onchange=()=>{var b=a.value;confirm("Are you sure? This will erase any data you have currently entered.")?(y=parseInt(b,10),z.removeChild(document.getElementsByTagName("tbody")[0]),A()):a.value=y.toString(10)};
const c=document.getElementById("Solver");c.onchange=()=>{w.postMessage({type:1,data:c.value})};for(const b of document.getElementsByClassName("lb1"))b.onchange=()=>{var d=b.children[0];const f=d.value;b.className=d.checked?"col2":"lb1";w.postMessage({type:2,data:f})}};export{};
